function asyncGeneratorStep(e,t,n,r,a,c,o){try{var i=e[c](o),s=i.value}catch(e){return void n(e)}i.done?t(s):Promise.resolve(s).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){asyncGeneratorStep(c,r,a,o,i,"next",e)}function i(e){asyncGeneratorStep(c,r,a,o,i,"throw",e)}o(void 0)}))}}define(["clitpl","lodash","i18n","bootstrap","bootstrap-select"],(function(e,t,n){"use strict";return function(r){var a=r.key,c=r.template,o=r.getter,i=r.postrender,s=r.creater;return function(){var r=_asyncToGenerator(regeneratorRuntime.mark((function r(u){var l,p,f,d,h,v,y,m,g=arguments;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(m=function(){return(m=_asyncToGenerator(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h.button("loading"),n.next=3,o.call.apply(o,[u].concat(p));case 3:return r=n.sent,n.next=6,e._render("autocomplete/"+c,Object.assign({multiple:u.prop("multiple")},r));case 6:if(a=n.sent,u.html(d),u.append(a),t.each(t.cloneDeep(u.data("autoselector.items")),(function(e){t.each(e,(function(t,n){u.find('[value="'+e._id+'"]').data(n,t)}))})),!i){n.next=13;break}return n.next=13,i.call.apply(i,[u].concat(p));case 13:h.button("reset"),u.selectpicker("refresh");case 15:case"end":return n.stop()}}),n)})))).apply(this,arguments)},y=function(){return m.apply(this,arguments)},l=g.length,p=new Array(l>1?l-1:0),f=1;f<l;f++)p[f-1]=g[f];if(u=u.filter("select"),d=u.html(),u.length){r.next=7;break}return r.abrupt("return");case 7:return h=u.closest(".input-group").find("> .input-group-addon"),u.data("create")&&s&&(v='<div id="create" class="btn btn-info btn-block">'+n("Add new item")+"</div>",u.selectpicker({noneResultsText:v}),u.data("selectpicker").$menu.on("click","#create",(function(){return s.call.apply(s,[u,{text:u.data("selectpicker").$searchbox.val()}].concat(p)).then((function(e){return u.data(a,e),u.selectpicker("toggle"),y()})).catch(window.appError),!1}))),u.on("refreshed.bs.select",(function(){var e=u.data(a);e&&u.selectpicker("val",Array.isArray(e)?e:String(e).split(","))})),r.next=12,y();case 12:u.on("change changed.bs.select",(function(){u.data(a,u.val())}));case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}));