function asyncGeneratorStep(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,a)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){asyncGeneratorStep(o,n,a,i,c,"next",e)}function c(e){asyncGeneratorStep(o,n,a,i,c,"throw",e)}i(void 0)}))}}define(["jquery","clitpl","api","bootstrap-dialog","i18n","checkperm","jquery-block"],(function(e,t,r,n,a,o){return function(){return e((function(){"use strict";var i=e("#maincontent");i.on("click",".aptActivity",function(){var r=_asyncToGenerator(regeneratorRuntime.mark((function r(n){var a,o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.preventDefault(),a=e(this),o=a.data("_id"),i.block(),r.prev=4,r.next=7,t._render("activity/activity_modal",{query:{$or:[{"rel._id":o},{"rel.obj":"billing","body._idowner":o}]}});case 7:c=r.sent,e(c).modal(),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),window.appError(r.t0);case 14:return r.prev=14,i.unblock(),r.finish(14);case 17:case"end":return r.stop()}}),r,this,[[4,11,14,17]])})));return function(e){return r.apply(this,arguments)}}()),o(["apartment.delete"])&&i.on("click",".deleteApt",(function(t){var o=e(this).data("_id");n.confirm({title:a("Warning!"),type:n.TYPE_WARNING,message:a("Are you sure you want to delete this apartment?"),callback:function(e){return _asyncToGenerator(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,i.block(),t.next=6,r.call("apartment.deleteApartment",{_id:o});case 6:window.pageReload(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),window.appError(t.t0);case 12:return t.prev=12,i.unblock(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})))()}})}))}))}}));