define(["jquery","amount_ex"],(function(a,e){return function(i){var n=i.uniq;return a((function(){var i=a("#"+n);e(i.find(".paid-amount")),i.find(".amenity_type").click((function(e){var n=a(this);i.find("li.amenity_type.active").removeClass("active").find("i").removeClass("fa-check-circle-o").addClass("fa-circle-o"),n.addClass("active").find("i").removeClass("fa-circle-o").addClass("fa-check-circle-o");var t=a(e.currentTarget).data("val");if("all"!==t){if("selected"===t)return i.find("li.amenity_item.active").removeClass("hidden"),void i.find("li.amenity_item:not(.active)").addClass("hidden");i.find("li.amenity_item[data-"+t+"]").removeClass("hidden"),i.find("li.amenity_item:not([data-"+t+"])").addClass("hidden")}else i.find("li.amenity_item").removeClass("hidden")})),i.find(".with-extra-opts").on("change",(function(e){var i=a(e.currentTarget).closest(".amenity-opts-section"),n=a(e.currentTarget).val();i.find(".extra-opts").toggleClass("hidden","0"==n)})),i.data("getAmenity",(function(){var e={},n={};return i.find("li.amenity_item").not(".active").toArray().forEach((function(e){var i=a(e);i.data("_b_garage")&&(n._i_garage=1),i.data("_b_area")&&(n._f_meter=1)})),{amenity:{items:i.find("li.amenity_item.active").toArray().map((function(n){var t=a(n),d={_id:t.data("id")};if(t.data("_b_garage")&&(e._i_garage=parseInt(i.find("#garagecount").val()||"0")),t.data("_b_area")&&(e._f_meter=parseFloat(i.find("#areacount").val()||"0")),t.data("_b_internetpolicy")&&(d._b_internetPolicy=1,d.subtype=t.find("[name=internetpolicy-"+d._id+"]:checked").val(),d._b_paid=parseInt(t.find("[name=internetpolicypaid-"+d._id+"]:checked").val()),d._b_paid)){var r=t.find("[name=internetpolicypaid-"+d._id+"]").closest(".amenity-opts-section");d._mcval=r.find(".extra-opts .paid-amount")[0].get_mc(),d.chargeFrequency=r.find("[name=chargeFrequency-"+d._id+"]").val()}if(t.data("_b_parkingpolicy")&&(d._b_parkingPolicy=1,d.location=t.find("[name=parkingpolicylocation-"+d._id+"]:checked").val(),d.prereserve=t.find("[name=parkingpolicyprereserve-"+d._id+"]:checked").val(),d.area=t.find("[name=parkingpolicyarea-"+d._id+"]:checked").val(),d._b_paid=parseInt(t.find("[name=parkingpolicypaid-"+d._id+"]:checked").val()),d._b_paid)){var c=t.find("[name=parkingpolicypaid-"+d._id+"]").closest(".amenity-opts-section");d._mcval=c.find(".extra-opts .paid-amount")[0].get_mc(),d.chargeFrequency=c.find("[name=chargeFrequency-"+d._id+"]").val()}return d}))},extraFields:e,unsetExtraFields:n}}))}))}}));