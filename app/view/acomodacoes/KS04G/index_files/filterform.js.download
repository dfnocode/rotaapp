function asyncGeneratorStep(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){asyncGeneratorStep(i,r,a,o,u,"next",e)}function u(e){asyncGeneratorStep(i,r,a,o,u,"throw",e)}o(void 0)}))}}define(["jquery","admin/buildingac","autocomplete/apartac","datePickers","moment","admin/staffac","admin/groupac","api!price.getLastExchangeRate","bootstrap-select","jquery-addons","jquery-block","dom-ready"],(function(e,t,n,r,a,i,o,u){return function(){var c=_asyncToGenerator(regeneratorRuntime.mark((function c(f){var d,p,s,m,l,v;return regeneratorRuntime.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=f.from,p=f.to,s=f.dateof,m=f.setStartDate,l=f.setEndDate,(v=e("#filterform").validate()).find(".selectpicker").selectpicker("refresh"),s&&(r(v.find("input.dateof"),a.utc(s,"MM/YYYY").toDate(),null,null,1),v.find("input.dateof").on("changeDate",(function(){var e=v.find("input.dateof").data("datepicker").getUTCDate();v.find("input[name='dateof']").val(a.utc(e).format("MM/YYYY"))})).trigger("changeDate")),r(v.find("input.from"),d,v.find("input.to"),p),m&&v.find("input.from, input.to").datepicker("setStartDate",m),l&&v.find("input.from, input.to").datepicker("setEndDate",l),v.submit((function(){var t=v.find(".filterPrice").toArray().map((function(t){return Math.round(e(t).data("number-value")*u[window._user.currency+window.__defaultCurr])})).sort((function(e,t){return e-t})).join(",");if(t&&"0,0"!=t&&","!=t&&"NaN,NaN"!=t&&v.find("[name='newPrice'], [name='salePrice'], [name='rentalPrice']").val(t),v.find("input.from").val()){var n=a.utc(v.find("input.from").data("datepicker").getUTCDate());v.find('input[name="from"]').val(n.format("YYYY-MM-DD"))}if(v.find("input.to").val()){var r=a.utc(v.find("input.to").data("datepicker").getUTCDate());v.find('input[name="to"]').val(r.format("YYYY-MM-DD"))}})),c.next=10,Promise.all([_asyncToGenerator(regeneratorRuntime.mark((function e(){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.find("#ApartID"),a=v.find("#buildID"),i={"types._b_main":1,active:{$in:["yes","hidden"]}},e.next=5,t(a);case 5:return e.next=7,n(r,{queryFilter:i,$building:a});case 7:case"end":return e.stop()}}),e)})))(),i(v.find("#respID")),o(v.find("#groupID"))]);case 10:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}));