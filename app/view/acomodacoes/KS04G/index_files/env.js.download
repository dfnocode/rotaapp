!function(e,r){e.momentLangs={en_US:"en-gb",pt_BR:"pt-br",de_DE:"de",ru_RU:"ru",es_ES:"es",sv_SE:"sv",it_IT:"it",fr_FR:"fr",pt_PT:"pt",el_GR:"el"};var t=Date.now()-e.__datenow;Date.nowUTC=function(){return Date.now()-t},Date.prototype.toString=function(){return Number.isFinite(this.getTime())?this.toISOString():"Invalid Date"},Array.prototype.includes=Array.prototype.includes||function(){return-1!==this.indexOf.apply(this,arguments)},String.prototype.includes=String.prototype.includes||function(){return-1!==this.indexOf.apply(this,arguments)},Number.prototype.pokLocaleString=function(e,r){void 0===r&&(r={});try{return this.toLocaleString(e.replace("_","-"),r)}catch(e){return this.toFixed(2)}},e.parseFloat=function(e){if("number"==typeof e)return e;if(!Number.isFinite(Number.parseFloat(e)))return Number.parseFloat(e);var r="-"===(e=e.toString().replace(/[^\d,.-]/g,"")).charAt(0)?"-":"+",t=e.match(/[.,](\d+)$/);return e=e.replace(/[.,]\d*$/,"").replace(/\D/g,""),Number(""+r+e+(t?"."+t[1]:""))},e.parseInt=function(e,r){if("number"==typeof e)return Math.floor(e);if(!Number.isFinite(Number.parseInt(e,r)))return Number.parseInt(e,r);var t="-"===(e=e.toString().replace(/[^\d,.-]/g,"")).charAt(0)?"-":"+";return e=e.replace(/[.,]\d*$/,"").replace(/\D/g,""),Number(""+t+e)},e.toggleFullscreen=function(e){r.fullscreenElement?r.exitFullscreen():e.requestFullscreen()},e.setFullscreenModal=function(t){r.fullscreenElement&&e.requestAnimationFrame((function(){t.appendTo(r.fullscreenElement),e.$(".modal-backdrop").appendTo(r.fullscreenElement)}))},e.addEventListener("error",(function(r){return r&&(r=r.error||r,e.Raven&&"ApiError"!==r.name&&e.Raven.captureException(r),(!e._relisets||e._user._iduserex||"ApiError"===r.name)&&e.appError(r)),!1}),!1),e.addEventListener("unhandledrejection",(function(r){var t=r.reason;return t&&(e.Raven&&"ApiError"!==t.name&&e.Raven.captureException(t),(!e._relisets||e._user._iduserex||"ApiError"===t.name)&&e.appError(t)),!1}),!1),e.imgError=function(r){var t="/image/"+e._wtmid;requirejs(["jquery"],(function(e){var n=e(r);n.removeAttr("onError"),n.attr("src").includes("/image/")&&(n.css("background-color","#ccc").attr("src",t),n.parent().is("picture")?n.parent().replaceWith(n.clone()):n.replaceWith(n.clone()))}))},e.appError=function(t){if(t){if((t.responseText||t.statusText)&&!t.message)return e.appError(t.responseText||t.statusText);if(e.CustomEvent){var n=new e.CustomEvent("appError",{detail:t,bubbles:!0});r.dispatchEvent(n)}if(console.trace(t),t.data&&e.ApiError&&t.data.subject===e.ApiError.Subject.INVALID_TOKEN)return e.location.reload();if("object"==typeof t&&"requireModules"in t){var i=t.requireModules;if(Array.isArray(i)){if(0===(i=i.filter((function(e){return e&&!e.toString().includes("//")&&!e.toString().includes("www.")&&!e.toString().includes("http:")&&!e.toString().includes("https:")}))).length)return void console.trace(t)}else if(void 0===i)return void console.trace(t)}"string"==typeof t&&(t=e.ApiError?new e.ApiError(t):new Error(t));var o=t.message||t.errmsg||t;if(e.Raven&&"ApiError"!==t.name){var a=t;a instanceof Error||(a=new Error(o)),e.Raven.captureException(a)}if(!e.onceHardError)return t.requireModules&&e.hardError?e.hardError():(requirejs(["jquery","iziToast","pickTranslate"],(function(r,n,i){"ApiError"===t.name&&t.data&&t.data.multilangs&&(o=i(t.data.multilangs)||o);var a=r("<div>"+o+"</div>");a.find("script, style").remove(),n.error({icon:"",drag:!1,displayMode:1,timeout:e._autotest?2e3:1e4,closeOnEscape:!0,progressBarEasing:"ease-in-out",maxWidth:"400px",message:a.html()})}),e.hardError),!1)}},e.appInfo=function(r,t,n){void 0===t&&(t=""),void 0===n&&(n="info"),r&&requirejs(["jquery","iziToast"],(function(i,o){var a=i("<div>"+r+"</div>");a.find("script, style").remove(),o[n]({icon:"",drag:!1,displayMode:1,timeout:e._autotest?2e3:1e4,closeOnEscape:!0,progressBarEasing:"ease-in-out",maxWidth:"400px",title:t||"",message:a.html()})}),e.appError)},e.Raven&&e._user.email&&e.Raven.setUser({email:e._user.email,id:e._user._id}),e.addEventListener("beforeunload",(function(r){return e.hardError=function(){},""})),e.fbAsyncInit=function(){try{e.FB.init({appId:e._fbAppId,status:!0,autoLogAppEvents:!0,xfbml:!0,version:"v8.0"})}catch(e){console.trace(e)}}}(window,document);