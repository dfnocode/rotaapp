function asyncGeneratorStep(e,t,n,a,r,i,d){try{var o=e[i](d),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function d(e){asyncGeneratorStep(i,a,r,d,o,"next",e)}function o(e){asyncGeneratorStep(i,a,r,d,o,"throw",e)}d(void 0)}))}}define(["jquery","datePickers","moment","autocomplete/apartac","admin/landlordac","admin/groupac","admin/buildingac","admin/pricegroupac","bootstrap-select","jquery-addons"],(function(e,t,n,a,r,i,d,o){return function(c){var u=c.filter,s=c._idbuildings;return e((function(){"use strict";var c=e("#maincontent").find("#filterform");c.find("[name=channel]").val(u.channel).change();var f=n.utc(u.from,"YYYY-MM-DD").toDate(),l=n.utc(u.to,"YYYY-MM-DD").toDate(),m=c.find(".from"),p=c.find(".to");t(m,f,p,l),m.on("changeDate",(function(){var e=n.utc(c.find(".from").data("datepicker").getUTCDate()).add(17,"day").toDate(),t=n.utc(c.find(".from").data("datepicker").getUTCDate()).add(365,"day").toDate();n.utc(p.data("datepicker").getUTCDate()).isAfter(t)&&p.datepicker("setUTCDate",t),n.utc(p.data("datepicker").getUTCDate()).isBefore(e)&&p.datepicker("setUTCDate",e),p.datepicker("setStartDate",e),p.datepicker("setEndDate",t)})),m.trigger("changeDate"),c.validate().submit((function(){var e=n.utc(c.find("input.from").data("datepicker").getUTCDate()).hours(12);c.find('input[name="from"]').val(e.format("YYYY-MM-DD"));var t=n.utc(c.find("input.to").data("datepicker").getUTCDate()).hours(12);c.find('input[name="to"]').val(t.format("YYYY-MM-DD"))})),i(c.find('[name="groups[]"]'));var g=c.find('select[name="_idapartment[]"]'),v=c.find('select[name="landlord"]'),D=c.find('select[name="_idregion"]'),Y=c.find('select[name="buildings[]"]'),h=c.find('select[name="priceGroups[]"]');D.on("changed.bs.select",(function(){c.find("select, input").filter(":not(.data, select[name='_idregion'])").val(""),c.submit()}));var y=D.val(),k={"types._b_main":1,active:{$in:["yes","hidden"]},_idregion:D.val()||{$exists:0}};"all"===y&&delete k._idregion,_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r(v),d(Y)]);case 2:return e.next=4,Promise.all([o(h,{_idbuildings:s,$building:Y}),a(g,{queryFilter:k,$landlord:v,$building:Y})]);case 4:case"end":return e.stop()}}),e)})))()}))}}));