function asyncGeneratorStep(e,n,t,a,i,r,d){try{var o=e[r](d),c=o.value}catch(e){return void t(e)}o.done?n(c):Promise.resolve(c).then(a,i)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise((function(a,i){var r=e.apply(n,t);function d(e){asyncGeneratorStep(r,a,i,d,o,"next",e)}function o(e){asyncGeneratorStep(r,a,i,d,o,"throw",e)}d(void 0)}))}}define(["jquery","datePickers","moment","admin/clientac","admin/agentac","admin/partnerac","autocomplete/apartac","admin/bankac","admin/groupac","autocomplete/reserveac","admin/promocodeac","admin/buildingac","clitpl","jquery-block","jquery-addons","bootstrap-select"],(function(e,n,t,a,i,r,d,o,c,f,u,s){return function(m){var l=m.filter;return e((function(){var m=e("#filterform"),p={active:{$in:["yes","hidden"]},"types._b_main":1},v=m.find("select.apartment"),h=m.find("select.building");_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(h);case 2:return e.next=4,d(v,{queryFilter:p,$building:h});case 4:case"end":return e.stop()}}),e)})))(),a(m.find("#client"),m),i(m.find('[name="agents[]"]')),r(m.find('[name="partners[]"]')),o(m.find('[name="bank[]"]')),c(m.find('[name="groups[]"]')),f(m.find("#reserve"),1),u(m.find('[name="promo_code"]')),e("#maincontent").find(".sort-by").change((function(){var n=e(this).find("option:selected").val();m.find("input[name='sortOrder']").val(n),m.submit()})),n(m.find("input.from"),l._dtfrom,m.find("input.to"),l._dtto),n(m.find("input.fromex"),l._dtfromex,m.find("input.toex"),l._dttoex),m.on("click",".select-item",(function(){var n=e(this),t=n.data("id"),a=n.text(),i=n.data("type"),r=m.find("#"+i),d=m.find("."+i+"-select");r.val(a),r.data(i+"id",t),d.val(t)})),m.on("click",".btn-remove-filter-item",(function(){var n=e(this).parent();e(this).remove(),n.find("*").length||n.hasClass("hidden")||n.addClass("hidden")})),m.find("[name='dateof']").change((function(){m.find("#dtdesconsider").toggleClass("hide","_dtcreate"!=e(this).val());var n=["_dtcreate","_dtinclude"].includes(e(this).val());m.find("#dtextra").toggleClass("hidden",n),n&&m.find("[name='dtextra']").prop("checked",!1).change()})).change(),m.find("[name='dtextra']").change((function(){m.find(".dtextra-block").toggleClass("hidden",!e(this).prop("checked"))})).change(),m.validate().submit((function(){if("_dtcreate"!==m.find("[name='dateof']").val()&&m.find("[name='dtdesconsider']").prop("checked",!1),m.find("input.from").val()){var e=t.utc(m.find("input.from").data("datepicker").getUTCDate()).hours(12);m.find('input[name="from"]').val(e.format("YYYY-MM-DD"))}if(m.find("input.to").val()){var n=t.utc(m.find("input.to").data("datepicker").getUTCDate()).hours(12);m.find('input[name="to"]').val(n.format("YYYY-MM-DD"))}var a=m.find("[name='dtextra']").prop("checked");if(m.find("input.fromex").val()&&a){var i=t.utc(m.find("input.fromex").data("datepicker").getUTCDate()).hours(12);m.find('input[name="fromex"]').val(i.format("YYYY-MM-DD"))}if(m.find("input.toex").val()&&a){var r=t.utc(m.find("input.toex").data("datepicker").getUTCDate()).hours(12);m.find('input[name="toex"]').val(r.format("YYYY-MM-DD"))}m.find("input[name='sortBy']").val(m.find("[name='dateof'] option:selected").val()),m.find("input[name='client']").val(m.find("#client").data("clientid")),m.find("input[name='reserve']").val(m.find("#reserve").data("reserveid"))}))}))}}));