!function(){function e(){"use strict";return{parse:function(e){var r=function(e){var r=document.createElement("a");r.href=e;var t=r.cloneNode(!1);return{protocol:t.protocol,hostname:t.hostname,port:"80"==t.port||"443"==t.port?"":t.port,pathname:"/"===t.pathname[0]?t.pathname:"/"+t.pathname,search:t.search,hash:t.hash,host:t.host,query:{}}}(e=e||document.URL);return r.search&&"?"!==r.search?(r.search.substr(1).split("&").forEach((function(e){e=e.split("=");var t=unescape(e[0]),a=unescape(e[1]);if(a){var n=!1;t.endsWith("[]")&&(t=t.slice(0,-2),n=!0),n||r.query[t]?Array.isArray(r.query[t])?r.query[t].push(a):r.query[t]?r.query[t]=[r.query[t],a]:r.query[t]=[a]:r.query[t]=a}})),r):r},format:function(e,r){var t,a,n,o=e.pathname+(a=e.query,n=[],Object.keys(a).forEach((function(e){var r=a[e];Array.isArray(r)?(e+="[]",r.forEach((function(r){n.push(escape(e)+"="+escape(r))}))):n.push(escape(e)+"="+escape(r))})),"?"+n.join("&"))+("#"!==(t=e.hash)[0]&&(t="#"+t),1===t.length?"":t);return r?o:e.protocol+"//"+e.hostname+(e.port?":"+e.port:"")+o}}}"undefined"!=typeof define&&define.amd?define([],(function(){return e()})):this.url=e()}();