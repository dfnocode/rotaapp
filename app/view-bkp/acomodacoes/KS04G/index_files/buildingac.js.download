function asyncGeneratorStep(e,n,t,r,i,a,o){try{var d=e[a](o),u=d.value}catch(e){return void t(e)}d.done?n(u):Promise.resolve(u).then(r,i)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){asyncGeneratorStep(a,r,i,o,d,"next",e)}function d(e){asyncGeneratorStep(a,r,i,o,d,"throw",e)}o(void 0)}))}}define(["jquery","api","lodash","pickTranslate","autocomplete/autoselector","api!core._getUser"],(function(e,n,t,r,i,a){"use strict";var o=t.map(a.buildings,"_id");function d(e){a._b_notAllApartments&&(e.$and=e.$and||[],e.$and.push({_id:{$in:o}}))}return i({key:"buildingid",template:"building",getter:function(e){var i=this;return _asyncToGenerator(regeneratorRuntime.mark((function a(){var o,u,s,c,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=(void 0===e?{}:e).queryFilter,d(u=void 0===o?{active:{$in:["yes","hidden"]}}:o),a.next=4,n.cache("building.getBuildingEx",{query:u,fields:{_adr:1,id:1,avatar:1,_id:1}});case 4:return s=a.sent,c=s.list,i.data("autoselector.items",c),l=t(c).groupBy((function(e){var n=e._adr,i=void 0===n?{}:n;return[r(t.get(i,"_t_country._msname")),i.state,i.city,i.region].filter(Boolean).join(", ")})).map((function(e,n){return{items:e,code:n}})).value(),a.abrupt("return",{groups:l});case 9:case"end":return a.stop()}}),a)})))()},postrender:function(n){var t=(void 0===n?{}:n).$priceGroup;if(t&&t.length){var r=this,i=function(){if(t.find("option[data-_idbuilding]").prop("disabled",!1),r.val().length){var n=r.val();n=Array.isArray(n)?n:[n],t.find("option[data-_idbuilding]").each((function(){var t=e(this);n.includes(t.data("_idbuilding"))||t.prop("disabled",!0)}))}t.prop("disabled",0===t.find("option[data-_idbuilding]").not(":disabled").length),t.selectpicker("refresh")};r.on("changed.bs.select",i),i()}}})}));