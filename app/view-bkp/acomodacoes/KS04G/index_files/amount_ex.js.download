function asyncGeneratorStep(e,a,t,n,r,c,i){try{var u=e[c](i),l=u.value}catch(e){return void t(e)}u.done?a(l):Promise.resolve(l).then(n,r)}function _asyncToGenerator(e){return function(){var a=this,t=arguments;return new Promise((function(n,r){var c=e.apply(a,t);function i(e){asyncGeneratorStep(c,n,r,i,u,"next",e)}function u(e){asyncGeneratorStep(c,n,r,i,u,"throw",e)}i(void 0)}))}}define("amount_ex",["jquery","lodash","clitpl"],(function(e,a,t){"use strict";return function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(r,c,i){var u=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==(r=e(r)).length){n.next=3;break}return n.abrupt("return");case 3:if(!r.data("pok.amount_ex")){n.next=5;break}return n.abrupt("return");case 5:return 2===u.length&&(i=c,c="curr"),n.next=8,Promise.all(r.toArray().map(function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(r){var u,l,o,s,d,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=e(r),c=c||"curr",l=a.clone(i||u.data("value")||{}),o={name:c,_mcval:l,maincurr:u.data("deffcurr")||window.__defaultCurr,_t_valdisabled:u.data("disabled"),_t_currdisabled:u.data("currdisabled"),_t_required:u.data("required"),_t_large:u.data("large"),_t_valmin:u.data("valmin"),_t_valmax:u.data("valmax"),_t_placeholder:u.data("placeholder"),_t_style:u.data("style"),_t_style_input:u.data("style_input")},Object.keys(o._mcval).length&&(o.maincurr in o._mcval||(o.maincurr=Object.keys(o._mcval)[0]),o.value=o._mcval[o.maincurr]),n.next=7,t._render("amount",o);case 7:s=n.sent,d=e(s),u.append(d),v=d.find("input."+c),d.on("click",".js-change-curr",(function(a){a.preventDefault();var t=e(this),n=t.text();d.find("li.active").removeClass("active"),t.parent().addClass("active"),t.closest(".curr-group").find(".active-curr").text(n),d.find("input.currency").val(n),v.val(l[n]).change()})),v.val()&&v.trigger("change",["format"]),u.each((function(){var a=e(this);this.get_mc=function(){var e,t=a.find(".currency").val(),n=Math.abs(parseFloat(a.find("."+o.name).data("number-value")||a.find("."+o.name).val())||0);return(e={})[t]=n,e},this.get_val=function(){return Math.abs(parseFloat(a.find("."+o.name).data("number-value")||a.find("."+o.name).val())||0)},this.fill_mc=function(e){l=e;var t=a.find(".currency").val();a.find("."+o.name).val(l[t]||0).change()},this.fill_val=function(e){a.find("."+o.name).val(e).change()}}));case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()));case 8:r.data("pok.amount_ex",!0);case 9:case"end":return n.stop()}}),n)})));return function(e,a,t){return n.apply(this,arguments)}}()}));