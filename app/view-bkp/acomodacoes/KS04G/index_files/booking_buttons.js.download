define(["jquery","safe","clitpl","checkperm","jquery-addons","jquery-block"],(function(o,e,n,i){return function(){return o((function(){"use strict";var t=o("#maincontent");t.on("click",".booking-item .activity",(function(){var i=o(this).data("_id");return e.run((function(r){t.block(),n.render("activity/activity_modal",{query:{$or:[{"rel._id":i},{"body._idreserve":i}]}},e.sure_result(r,(function(e){o(e).modal()})))}),(function(o){t.unblock(),window.appError(o)})),!1})),i(["reserve.delete"])&&t.on("click",".booking-item .booking-delete",(function(){var i=o(this).closest(".booking-item"),t=o(this).data("_id"),r=o(this).data("bcomcode"),c=o(this).data("dcomcode");return i.block(),e.run((function(d){n.render("reservation/booking_item_delete_modal",{_id:t,bcomcode:r,dcomcode:c},e.sure_result(d,(function(e){var n=o(e).modal();n.on("done",(function(){n.modal("hide"),i.remove()}))})))}),(function(o){i.unblock(),window.appError(o)})),!1}))}))}}));