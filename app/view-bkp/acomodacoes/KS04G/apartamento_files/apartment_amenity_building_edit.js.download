function asyncGeneratorStep(n,e,t,r,a,i,o){try{var u=n[i](o),c=u.value}catch(n){return void t(n)}u.done?e(c):Promise.resolve(c).then(r,a)}function _asyncToGenerator(n){return function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function o(n){asyncGeneratorStep(i,r,a,o,u,"next",n)}function u(n){asyncGeneratorStep(i,r,a,o,u,"throw",n)}o(void 0)}))}}define(["jquery","api","checkperm","beforeUnload","i18n","jquery-addons","jquery-block"],(function(n,e,t,r,a){return function(i){var o=i.apartment._id;return n((function(){if(t(["apartment.main.edit"])){var i=n("#maincontent"),u=i.find("#building-amenities-form-save"),c=u.find(".amenityContainer");u.validate(),u.submit(function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(t){var r,s,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),r={_id:o,buildingAmenity:{}},s=c.data("getAmenity")(),f=s.amenity,r.buildingAmenity=f,i.block(),n.prev=5,n.next=8,e.call("apartment.saveApartment",r);case 8:window.appInfo(a("Saved successfully")),u.find(":submit").button("reset").hide(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),window.appError(n.t0);case 15:return n.prev=15,i.unblock(),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[5,12,15,18]])})));return function(e){return n.apply(this,arguments)}}()),r(u,u.find(":submit"))}}))}}));