function asyncGeneratorStep(e,t,n,r,a,i,s){try{var c=e[i](s),o=c.value}catch(e){return void n(e)}c.done?t(o):Promise.resolve(o).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function s(e){asyncGeneratorStep(i,r,a,s,c,"next",e)}function c(e){asyncGeneratorStep(i,r,a,s,c,"throw",e)}s(void 0)}))}}define(["jquery","api","clitpl","lodash","checkperm","translate_ex","beforeUnload","i18n","jquery-block","jquery-addons"],(function(e,t,n,r,a,i,s,c){return function(o){var p=o.apartment,u=p._id,d=p._mstitle,l=p._msdesc;return e((function(){var o=e("#maincontent"),p=o.find("#apartment-panel-description");i(p.find("#title"),d,"",0,!1,!0),i(p.find("#description"),l,"",0,!0),a(["apartment.main.edit"])&&(p.validate(),p.submit(function(){var e=_asyncToGenerator(regeneratorRuntime.mark((function e(a){var i,s,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),i={_id:u},r.set(i,"_mstitle",p.find("#title")[0].get_ms({strip:1})),r.set(i,"_msdesc",p.find("#description")[0].get_ms({strip:["br","p"]})),i.avatar=p.find("#avatar").val(),e.prev=5,e.next=8,t.call("apartment.saveApartment",i);case 8:return e.next=10,t.call("apartment.getSimpleOneApartment",{_id:u},{_id:1,avatar:1,type:1,_mstitle:1,_msdesc:1});case 10:return s=e.sent,e.next=13,n._render("apartment/apartment_panel_description",{apartment:s});case 13:d=e.sent,p.replaceWith(d),window.appInfo(c("Saved successfully")),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),window.appError(e.t0);case 21:return e.prev=21,o.unblock(),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[5,18,21,24]])})));return function(t){return e.apply(this,arguments)}}()),s(p,p.find(":submit")))}))}}));