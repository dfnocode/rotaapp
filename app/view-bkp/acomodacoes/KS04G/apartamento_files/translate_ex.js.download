function asyncGeneratorStep(t,e,a,r,n,i,o){try{var s=t[i](o),d=s.value}catch(t){return void a(t)}s.done?e(d):Promise.resolve(d).then(r,n)}function _asyncToGenerator(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var i=t.apply(e,a);function o(t){asyncGeneratorStep(i,r,n,o,s,"next",t)}function s(t){asyncGeneratorStep(i,r,n,o,s,"throw",t)}o(void 0)}))}}define("translate_ex",["jquery","striptags","clitpl","i18n","bootstrap"],(function(t,e,a,r){"use strict";return function(){var n=_asyncToGenerator(regeneratorRuntime.mark((function n(i,o,s,d,l,c){var u,f,m,p,h,b,g,v;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0===c&&(c=!1),(u=t(i)).length){n.next=4;break}return n.abrupt("return");case 4:if(!u.data("pok.translate_ex")){n.next=6;break}return n.abrupt("return");case 6:return n.prev=6,f=u.data("puretext"),n.next=10,a._render("translate_ex",{_msvalues:o||{},title:s,htmlEditor:l,inLine:c,charCount:d,disabled:u.data("disabled"),required:u.data("required")});case 10:m=n.sent,p=t(m),u.append(p),u.each((function(){var a=this;a.get_ms=function(r){var n=(void 0===r?{}:r).strip,i={};return t(a).find(".lang").each((function(){var a=t(this),r=String(a.data("otext")).replace(/(&nbsp;)+/," ").replace(/\s+/g," ").trim();n&&(r=Array.isArray(n)?e(r,n).trim():e(r).trim()),r&&e(r).trim()&&(i[a.data("lang")]=r)})),i}})),"multilangrich"===l?(h=function(e){var a=t(this),r=a.attr("name");a.closest("."+r).data("otext",a.val())},p.on("shown.bs.tab",'a[data-toggle="tab"]',(function(){if(!this.__translate_ex){this.__translate_ex=!0;var e=p.find(t(this).attr("href")+" .translate-editor");requirejs(["CodeMirror-html","MediaManager","summernote"],(function(t){e.summernote({toolbar:[["style",["bold","italic","underline","clear"]],["fontsize",["fontname","fontsize"]],["color",["color"]],["para",["style","ul","ol","paragraph","height"]],["insert",["MediaManager","link","table","hr"]],["misc",["fullscreen","codeview","undo","redo"]]],onCreateLink:function(t){return t},disableDragAndDrop:!0,dialogsFade:!0,height:300,codemirror:{CodeMirrorConstructor:t,mode:{name:"handlebars",base:"text/html"}}}).on("summernote.change",h),u.data("disabled")&&e.summernote("disable")}))}})),window._autotest&&p.find('a[data-toggle="tab"]').trigger("shown.bs.tab"),p.find(".translate-editor").each(h)):l?(b=function(t,a){try{var r=((a.originalEvent||a).clipboardData||window.clipboardData).getData("Text");a.preventDefault(),r=e(r).trim().split("\n").join("<br>"),document.execCommand("insertHTML",!1,r)}catch(t){}},g=function(a){var n=t(this),i=n.attr("name"),o=n.val().replace(/(&nbsp;)+/," ").trim();if(e(o).trim()||(o=""),d){var s=d-e(o).length;n.parent().find(".charCount").text(r("%s characters remaining").replace("%s",s)),s<0?(n.parent().addClass("has-error"),p.closest("form").find(":submit").prop("disabled",!0)):(n.parent().removeClass("has-error"),p.closest("form").find(":submit").prop("disabled",!1))}o=f?Array.isArray(f)?e(o,f).trim():e(o).trim():e(o,["p","br","a"]),u.find('a[data-iso="'+i+'"] .fa-exclamation-triangle').toggleClass("hidden",!!o),n.closest("."+i).data("otext",o)},p.on("shown.bs.tab",'a[data-toggle="tab"]',(function(){if(!this.__translate_ex){this.__translate_ex=!0;var e=p.find(t(this).attr("href")+" .translate-editor");requirejs(["summernote"],(function(){e.summernote({airMode:!0,disableDragAndDrop:!0,onCreateLink:function(t){return t},popover:{air:f?[]:[["font",["clear"]],["insert",["link"]]]},placeholder:r("write here...")}).on("summernote.change",g).on("summernote.paste",b),u.data("disabled")&&e.summernote("disable")}))}})),window._autotest&&p.find('a[data-toggle="tab"]').trigger("shown.bs.tab"),p.find(".translate-editor").each(g)):c&&(v=function(){var a=t(this),n=a.attr("name"),i=a.val().replace(/(&nbsp;)+/," ").trim();if(d){var o=d-e(i).length;a.parent().find(".charCount").text(r("%s characters remaining").replace("%s",o)),o<0?(a.parent().addClass("has-error"),p.closest("form").find(":submit").prop("disabled",!0)):(a.parent().removeClass("has-error"),p.closest("form").find(":submit").prop("disabled",!1))}u.find('a[data-iso="'+n+'"] .fa-exclamation-triangle').toggleClass("hidden",!!i),a.closest("."+n).data("otext",i)},p.find(".inline").on("keyup",v).on("change",v).each(v)),p.find("a:first").tab("show"),p.find(".tab-pane:first").addClass("active"),u.data("pok.translate_ex",!0),n.next=23;break;case 20:n.prev=20,n.t0=n.catch(6),window.appError(n.t0);case 23:case"end":return n.stop()}}),n,null,[[6,20]])})));return function(t,e,a,r,i,o){return n.apply(this,arguments)}}()}));